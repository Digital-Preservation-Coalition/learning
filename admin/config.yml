# config.yml
# ----------
# See here for documentation:
#   https://decapcms.org/docs/configuration-options/
#

# How to talk to the Git datafile store:
backend:
  name: github
  repo: Digital-Preservation-Coalition/learning
  branch: main

# Where in the repository to store uploaded files (may be overridden for specific collection/fields below):
media_folder: "assets/uploads"

# Use the PR-based editorial workflow:
# Not in use as it's quite complicated and the editing team is small.
#publish_mode: editorial_workflow

# Path where the site is hosted:
# Not needed at present.
#site_url: /learning/

# Defining the different collections of items:
collections:

- name: resources
  label: Learning Resources
  label_singular: 'Learning Resource'
  folder: _resources
  create: true
  path: '{{slug}}/index'
  media_folder: ''
  public_folder: ''
  fields:
  - label: "Resource Name"
    name: title
    widget: string
    required: true
  - label: Link
    name: resource_url
    widget: string
    required: true
    hint: "Please link to a publicly-accessible page for this resource."
  - label: "Type of Resource"
    name: resource-type
    widget: "select"
    options: [
      "Article",
      "Conference",
      "Conference Proceedings",
      "Degree Program",
      "Event Recording",
      "Group/Network",
      "In Person Training",
      "Journal",
      "Knowledge Base",
      "Mailing List",
      "Online Training - Instructor Led",
      "Online Training - Self Directed",
      "Report",
      "Scholarship/Grant",
      "Toolkit",
      "Training Content" 
    ]
    required: true
  - label: "Provider"
    name: provider
    widget: string
    required: true
  - label: "Creator(s)"
    name: creators
    widget: list
    required: false
    fields:
    - { label: "Creator", name: creator, widget: string, required: false }
  - label: "Release Year"
    name: release-year
    widget: "number"
    value_type: "int"
    min: 1900
    required: false
  - label: "Description"
    name: "body"
    widget: "markdown"
    required: true
  - label: "Learning Objectives"
    name: learning-objectives
    widget: list
    required: false
    fields:
    - { label: "Learning Objective", name: learning-objective, widget: string, required: false }
  - label: "Related Skills"
    label_singular: "Skill"
    name: skill-levels
    widget: list
    # There must be at least one entry for skill level:
    min: 1
    max: 10
    # Show skill and level in collapsed view of each entry:
    summary: '{{fields.skill}} - level {{fields.level}}'
    fields:
        - { label: "Skill", name: "skill", widget: "relation", collection: "skills", search_fields: ["title"], value_field: "title", display_fields: ["title"] }
        - label: "Level"
          name: "level"
          widget: "select"
          options:
          - { label: "0. Novice", value: "0" }
          - { label: "1. Beginner", value: "1" }
          - { label: "2. Intermediate", value: "2" }
          - { label: "3. Advanced", value: "3" }
          - { label: "4. Expert", value: "4" }
  - label: "Related Roles"
    label_singular: "Related Role"
    name: roles
    widget: list
    fields:
        - { label: "Role", name: "role", widget: "relation", collection: "roles", search_fields: ["title"], value_field: "title", display_fields: ["title"] }
  - label: "Country"
    name: country
    widget: string
    required: false
  - label: "Language"
    name: language
    widget: string
    required: false
  - label: "Free or Paid"
    name: free-or-paid
    widget: select
    options: [
      "Free",
      "Paid"
    ]
    required: true
  - label: "Cost"
    name: cost
    widget: string
    required: false
  - label: "Qualifications"
    name: qualifications
    widget: string
    required: false
  - label: "Accredited"
    name: accredited
    widget: string
    required: false
  - label: "Open Access"
    name: open-access
    widget: select
    options: [
      "Yes",
      "No",
      "Unsure"
    ]
    required: false
  - label: "Licence"
    name: licence
    widget: string
    required: false
  - label: Part of Series"
    name: series
    widget: string
    required: false
  - label: "Related Resources"
    label_singular: "Related Resource"
    name: related-items
    widget: list
    fields:
        - { label: "Resource", name: "resource", widget: "relation", collection: "resources", search_fields: ["title"], value_field: "title", display_fields: ["title"] }
    required: false
  - label: "Resource Materials"
    name: files
    widget: file
    required: false
    media_library:
      config:
        multiple: true
  - label: "Logo"
    name: "logo"
    widget: "image"
    required: false
  - label: "Entry Created"
    name: "created"
    widget: "datetime"
    date_format: "YYYY-MM-DD"
  - label: "Entry Updated"
    name: "updated"
    widget: "datetime"
    date_format: "YYYY-MM-DD"

- name: skills
  label: Skills
  label_singular: Skill
  folder: _skills
  create: true
  fields:
  - label: Title
    name: title
    widget: string
  - label: "Competency Area"
    name: "competency-area"
    widget: "select"
    options: [
      "Governance, Resourcing, and Management", 
      "Communications and Advocacy", 
      "Information Technology", 
      "Legal and Social Responsibilities", 
      "Digital Preservation Domain Specific"
    ]
  - label: "Body"
    name: "body"
    widget: "markdown"
    required: false

- name: roles
  label: Roles
  label_singular: Role
  folder: _roles
  create: true
  fields:
  - label: Name
    name: title
    widget: string
  - label: "Description"
    name: "body"
    widget: "markdown" 
    required: false
  - label: "Alternative Names"
    name: alternative-names
    widget: list
    fields:
    - { label: Name, name: name, widget: string }

- name: 'pages'
  label: 'Other Pages'
  editor:
    preview: false
  files:
    - label: 'Homepage'
      name: 'index'
      file: 'index.md'
      preview_path: /
      fields:
        - { label: 'Title', name: 'title', widget: 'string', default: 'Welcome' }
        - { label: 'Body', name: 'body', widget: 'markdown' }
